{% extends "base.html" %}

{% block title %}
	—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è –¥—ñ—Ç–µ–π
{% endblock %}

{% block content %}
<header class="header" id="header">
	<div class="container">
		<div class="row d-flex align-items-center">
			<div class="col-3 col-md-4 col-lg-2">
				<a href="index.html">
					<img class="img-fluid logo" src="{{url_for('static', filename='img/low.png')}}" alt="logo">
				</a>
			</div>
			<!-- –ü–æ–ª–µ –ø–æ—à—É–∫—É -->
			<div class="col-9 serh d-lg-flex col-md-8 col-lg-7 flex items-center">
				<div class="search-wrapper">
					<input type="text" placeholder="–ü–æ—à—É–∫..." class="search-input" />
					<button class="search-button">üîç</button>
				</div>
			</div>
			<div class="col-12 reg-in col-md-12 d-lg-flex col-lg-3 justify-content-end align-items-center menu-collapse">
				<!-- –ú–µ–Ω—é -->
				<nav class="menu">
					<ul class="menu__list d-flex">
						<li class="menu__item">
							<p>–Ü–º'—è –ü—Ä–∏–∑–≤—ñ—â–µ (<span>–õ–æ–≥—ñ–Ω</span>)</p> <!-- –°—é–¥–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç–∏ –¥–∞–Ω—ñ –∑ —Ñ–æ—Ä–º–∏ —Ä–µ–µ—Å—Ç—Ä–∞—Ü—ñ—ó -->
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
</header>

<section class="cal-3">
	<div class="container">
		<div class="row">
			<div class="center col-12 col-lg-6"> 
				<div class="students">
					<div class="students-title">
						<h2>–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∏–π –∫–ª–∞—Å</h2> <!-- –°—é–¥–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç–∏ –¥–∞–Ω—ñ –∑ —Ñ–æ—Ä–º–∏ —Ä–µ–µ—Å—Ç—Ä–∞—Ü—ñ—ó -->
					</div>
				</div>
				<div class="desk-main">
					<div class="img-main">
						<img src="{{url_for('static', filename='img/168724.png')}}" class="avatar" alt=""> <!-- –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ -->
						<input id="file-input" type="file" name="file" multiple>
					</div>
					<div class="text-main">
						<p class="date-main">–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è:<span class="date-main-main">01.01.2001</span></p>
						<p class="desk-main-text">–ü—Ä–æ —Å–µ–±–µ:</p>
						<p class="desk-main-text-text">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –Ω–∞ —É—á–Ω—è - —Ü–µ –¥–æ–∫—É–º–µ–Ω—Ç, 
							—è–∫–∏–π —è–≤–ª—è—î —Å–æ–±–æ—é –æ—Ü—ñ–Ω–∫—É —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö, 
							–ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∏—Ö —Ç–∞ —ñ–Ω—à–∏—Ö –æ—Å–æ–±–∏—Å—Ç–∏—Ö 
							—è–∫–æ—Å—Ç–µ–π, —Ä–∏—Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä—É —à–∫–æ–ª—è—Ä–∞. 
							–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ —É—á–Ω—è —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –¥–ª—è 
							–Ω–æ–≤–æ–≥–æ –≤–∏–∫–ª–∞–¥–∞—á–∞ –∑ –º–µ—Ç–æ—é –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è 
							—ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É –¥–æ –Ω—å–æ–≥–æ —ñ 
							–Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –∑ –Ω–∏–º —á–∏ –¥–ª—è 
							–Ω–∞–¥–∞–Ω–Ω—è –≤ —ñ–Ω—à–∏–π –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –∑–∞–∫–ª–∞–¥.
						</p>
						<a href="#" class="in-desk-info">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ</a>
					</div>
				</div>
			</div>	
			<div class="center d-flex col-12 col-lg-6"> 
				<div class="calendar-wrapper">
					<div class="calendar-header">
						<button id="btnPrev" type="button">–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π</button>
						<span id="monthYear"></span>
						<button id="btnNext" type="button">–ù–∞—Å—Ç—É–ø–Ω–∏–π</button>
					</div>
					<div id="divCal" class="calendar-table"></div>
					<div class="calendar-buttons">
						<a href="#" class="podii-2">–í—Å—ñ –ø–æ–¥—ñ—ó —Ü—å–æ–≥–æ –º—ñ—Å—è—Ü—è</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<section class="rating-and-comment">
	<div class="header-back"></div>
	<div class="container">
		<div class="row">
			<div class="col-12">
				<h3>–û—Å–æ–±–∏—Å—Ç–µ –∑–∞–≤–¥–∞–Ω–Ω—è:<span class="titel-h3">—Å—Ç—Ä–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</span><span class="title-date">25.05.2025</span></h3>
				<p id="personal-assignment-description">
					–î–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ª–µ–Ω–¥—ñ–Ω–≥ ‚Äì –ø–µ–π–¥–∂ —Å—Ç–æ—Ä—ñ–Ω–∫—É, —è–∫–∞ –º–∞—î –∑–∞ –º–µ—Ç—É —ñ–Ω—Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø—Ä–æ 
					–æ—Å—Ç–∞–Ω–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –≤ –≥–∞–ª—É–∑—ñ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É. –í–µ—Å—å –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª, –¥–ª—è –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Å–∞–π—Ç—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º
					–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Ä–æ–∑–º—ñ—â–µ–Ω–∏–π —É –ø–∞–ø—Ü—ñ ¬´–ú–∞—Ç–µ—Ä—ñ–∞–ª¬ª. –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∂–µ —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏ –≤ –ø–∞–ø—Ü—ñ ¬´–ü—Ä–∏–∫–ª–∞–¥–∏¬ª.
<br>
					–í—Å—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä–µ–∂—ñ—Ç—å, –±—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –¥–∏—Å–∫—É D, –≤ –ø–∞–ø–∫—É ¬´–ü—Ä—ñ–∑–≤–∏—â–µ —ñ–º'—è¬ª (–≤–ª–∞—Å–Ω–µ –ü.–Ü.). –ü–æ—Ç—Ä—ñ–±–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–ª—è 
					—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∞–π—Ç—É —Å–∫–æ–ø—ñ—é–π—Ç–µ –∑ –ø–∞–ø–∫–∏ —ñ–∑ –∑–∞–≤–¥–∞–Ω–Ω—è–º, —Ç–æ–º—É —â–æ –¥–µ—è–∫—ñ –∑ –Ω–∏—Ö –º—ñ—Å—Ç—è—Ç—å –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç.
<br>
					–ü—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω—å –º–æ–∂–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è —Ç–∞–∫–∏–º –ø—Ä–æ–≥—Ä–∞–º–Ω–∏–º –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è–º (–ü–ó): –ë–ª–æ–∫–Ω–æ—Ç, Notepad++, Sublime Text, 
					Photoshop, Paint, Paint 3D, Denwer, Wordpress. –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ñ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤ (HTML/XHTML, CSS, JS, PHP) –∫–µ—Ä—É–π—Ç–µ—Å—å 
					–≤–µ–±-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏.
<br>
					–ö—Ä—ñ–º —Ç–æ–≥–æ, –ø—ñ–¥ —á–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±—É–¥–µ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏—Å—è —á–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥—É —ñ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å (–∑—Ä—É—á–Ω—ñ—Å—Ç—å). –ó–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∏–ª—å —Å–∞–π—Ç—É –ø–æ–≤–∏–Ω–µ–Ω 
					–±—É—Ç–∏ –¥—ñ–ª–æ–≤–∏–º —Ç–∞ —Å—É—á–∞—Å–Ω–∏–º. –ù–µ –∑–∞–±—É–≤–∞–π—Ç–µ –ø—Ä–æ –≤–µ—Ä—Å—Ç–∫—É, —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ–≤–∏–Ω–Ω–∞ –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç–∏—Å—è: —Å–ø–∏—Å–∫–∏, –∫–æ—Ä–æ—Ç–∫—ñ –∞–±–∑–∞—Ü–∏, –≤—ñ–¥—Å—Ç—É–ø–∏, 
					—ñ–Ω—Ñ–æ–≥—Ä–∞—Ñ—ñ–∫–∞ –∑–∞–º—ñ—Å—Ç—å –¥–æ–≤–≥–æ–≥–æ —Ç–µ–∫—Å—Ç—É.
				</p>
				<h3 class="teacher-evaluation">–û—Ü—ñ–Ω–∫–∞ –∑–∞ –∑–∞–≤–¥–∞–Ω–Ω—è <span class="grade-2">12</span></h3>	
			</div>
		</div>
	</div>
</section>

<section class="rating-and-comment-gr">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<h3>–ì—É—Ä—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è:<span class="titel-h3">—Å—Ç—Ä–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</span><span class="title-date">15.05.2025</span></h3>
				<p id="group-assignment-description">
					–î–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ª–µ–Ω–¥—ñ–Ω–≥ ‚Äì –ø–µ–π–¥–∂ —Å—Ç–æ—Ä—ñ–Ω–∫—É, —è–∫–∞ –º–∞—î –∑–∞ –º–µ—Ç—É —ñ–Ω—Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø—Ä–æ 
					–æ—Å—Ç–∞–Ω–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –≤ –≥–∞–ª—É–∑—ñ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É. –í–µ—Å—å –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª, –¥–ª—è –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Å–∞–π—Ç—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º
					–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Ä–æ–∑–º—ñ—â–µ–Ω–∏–π —É –ø–∞–ø—Ü—ñ ¬´–ú–∞—Ç–µ—Ä—ñ–∞–ª¬ª. –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∂–µ —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏ –≤ –ø–∞–ø—Ü—ñ ¬´–ü—Ä–∏–∫–ª–∞–¥–∏¬ª.
<br>
					–í—Å—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä–µ–∂—ñ—Ç—å, –±—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –¥–∏—Å–∫—É D, –≤ –ø–∞–ø–∫—É ¬´–ü—Ä—ñ–∑–≤–∏—â–µ —ñ–º'—è¬ª (–≤–ª–∞—Å–Ω–µ –ü.–Ü.). –ü–æ—Ç—Ä—ñ–±–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–ª—è 
					—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∞–π—Ç—É —Å–∫–æ–ø—ñ—é–π—Ç–µ –∑ –ø–∞–ø–∫–∏ —ñ–∑ –∑–∞–≤–¥–∞–Ω–Ω—è–º, —Ç–æ–º—É —â–æ –¥–µ—è–∫—ñ –∑ –Ω–∏—Ö –º—ñ—Å—Ç—è—Ç—å –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç.
<br>
					–ü—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω—å –º–æ–∂–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è —Ç–∞–∫–∏–º –ø—Ä–æ–≥—Ä–∞–º–Ω–∏–º –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è–º (–ü–ó): –ë–ª–æ–∫–Ω–æ—Ç, Notepad++, Sublime Text, 
					Photoshop, Paint, Paint 3D, Denwer, Wordpress. –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ñ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤ (HTML/XHTML, CSS, JS, PHP) –∫–µ—Ä—É–π—Ç–µ—Å—å 
					–≤–µ–±-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏.
<br>
					–ö—Ä—ñ–º —Ç–æ–≥–æ, –ø—ñ–¥ —á–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±—É–¥–µ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏—Å—è —á–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥—É —ñ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å (–∑—Ä—É—á–Ω—ñ—Å—Ç—å). –ó–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∏–ª—å —Å–∞–π—Ç—É –ø–æ–≤–∏–Ω–µ–Ω 
					–±—É—Ç–∏ –¥—ñ–ª–æ–≤–∏–º —Ç–∞ —Å—É—á–∞—Å–Ω–∏–º. –ù–µ –∑–∞–±—É–≤–∞–π—Ç–µ –ø—Ä–æ –≤–µ—Ä—Å—Ç–∫—É, —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ–≤–∏–Ω–Ω–∞ –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç–∏—Å—è: —Å–ø–∏—Å–∫–∏, –∫–æ—Ä–æ—Ç–∫—ñ –∞–±–∑–∞—Ü–∏, –≤—ñ–¥—Å—Ç—É–ø–∏, 
					—ñ–Ω—Ñ–æ–≥—Ä–∞—Ñ—ñ–∫–∞ –∑–∞–º—ñ—Å—Ç—å –¥–æ–≤–≥–æ–≥–æ —Ç–µ–∫—Å—Ç—É.
				</p>
				<h3 class="teacher-evaluation">–û—Ü—ñ–Ω–∫–∞ –∑–∞ –∑–∞–≤–¥–∞–Ω–Ω—è <span class="grade-2">8</span></h3>	
			</div>
		</div>
	</div>
</section>

{% endblock %}

{% block ModalWindows %}
<!-- –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ -->
<div style="display: none;">
	<div class="box-modal" id="exampleModal-12">
		<div class="box-modal_close arcticmodal-close"><img src="{{url_for('static', filename='img/close.png')}}" class="close"></div>
		<div>
			<div class="date">
				<p id="selectedDate"></p>
			</div>
			<div class="desc-date" id="eventDetails">
				<p>–ü–æ–¥—ñ—ó –≤—ñ–¥—Å—É—Ç–Ω—ñ</p>
			</div>
		</div>
	</div>
</div>

<div style="display: none;">
	<div class="box-modal" id="exampleModal-13">
		<div class="box-modal_close arcticmodal-close"><img src="{{url_for('static', filename='img/close.png')}}" class="close"></div>
		<div class="date">
			<p id="currentMonth"></p>
		</div>
		<ul class="list-event" id="eventList"></ul>
	</div>
</div>

<div style="display: none;">
	<div class="box-modal" id="exampleModal-14">
		<div class="box-modal_close arcticmodal-close"><img src="{{url_for('static', filename='img/close.png')}}" class="close"></div>
		<textarea name="date-of-birth" class="date-of-birth" id="dateOfBirthInput" placeholder="–û–Ω–æ–≤—ñ—Ç—å —Å–≤–æ—é –¥–∞—Ç—É –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è"></textarea>
		<textarea name="info-student-form" class="info-student-form" id="infoStudentInput" placeholder="–û–Ω–æ–≤—ñ—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Å–µ–±–µ"></textarea>
		<button class="info-in-back" onclick="updateStudentInfo()">–û–Ω–æ–≤–∏—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é</button>
	</div>
</div>

<script type="text/javascript">
	var Cal = function(divId) {
		this.divId = divId;
		this.DaysOfWeek = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–ù–¥'];
		this.Months = ['–°—ñ—á–µ–Ω—å', '–õ—é—Ç–∏–π', '–ë–µ—Ä–µ–∑–µ–Ω—å', '–ö–≤—ñ—Ç–µ–Ω—å', '–¢—Ä–∞–≤–µ–Ω—å', '–ß–µ—Ä–≤–µ–Ω—å', '–õ–∏–ø–µ–Ω—å', '–°–µ—Ä–ø–µ–Ω—å', '–í–µ—Ä–µ—Å–µ–Ω—å', '–ñ–æ–≤—Ç–µ–Ω—å', '–õ–∏—Å—Ç–æ–ø–∞–¥', '–ì—Ä—É–¥–µ–Ω—å'];
		var d = new Date();
		this.currMonth = d.getMonth();
		this.currYear = d.getFullYear();
		this.currDay = d.getDate();
		this.events = [];
	};

	Cal.prototype.fetchEvents = async function() {
		try {
			const response = await fetch('/api/events', {
				method: 'GET',
				headers: {
					'Content-Type': 'application/json'
				}
			});
			this.events = await response.json();
			console.log('–ü–æ–¥—ñ—ó –∑ API:', this.events);
		} catch (error) {
			console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –ø–æ–¥—ñ–π:', error);
		}
	};

	Cal.prototype.nextMonth = function() {
		if (this.currMonth == 11) {
			this.currMonth = 0;
			this.currYear = this.currYear + 1;
		} else {
			this.currMonth = this.currMonth + 1;
		}
		this.showcurr();
	};

	Cal.prototype.previousMonth = function() {
		if (this.currMonth == 0) {
			this.currMonth = 11;
			this.currYear = this.currYear - 1;
		} else {
			this.currMonth = this.currMonth - 1;
		}
		this.showcurr();
	};

	Cal.prototype.showcurr = function() {
		this.showMonth(this.currYear, this.currMonth);
	};

	Cal.prototype.showMonth = function(y, m) {
		var d = new Date();
		var firstDayOfMonth = new Date(y, m, 7).getDay();
		var lastDateOfMonth = new Date(y, m + 1, 0).getDate();
		var lastDayOfLastMonth = m == 0 ? new Date(y - 1, 11, 0).getDate() : new Date(y, m, 0).getDate();

		// –û–Ω–æ–≤–ª—é—î–º–æ –Ω–∞–∑–≤—É –º—ñ—Å—è—Ü—è —Ç–∞ —Ä–æ–∫—É
		document.getElementById('monthYear').textContent = this.Months[m] + ' ' + y;

		var html = '<table>';
		html += '<tr class="days">';
		for (var i = 0; i < this.DaysOfWeek.length; i++) {
			html += '<td>' + this.DaysOfWeek[i] + '</td>';
		}
		html += '</tr>';

		var i = 1;
		do {
			var dow = new Date(y, m, i).getDay();
			if (dow == 1) {
				html += '<tr>';
			} else if (i == 1) {
				html += '<tr>';
				var k = lastDayOfLastMonth - firstDayOfMonth + 1;
				for (var j = 0; j < firstDayOfMonth; j++) {
					html += '<td class="not-current">' + k + '</td>';
					k++;
				}
			}

			var currentDate = new Date(y, m, i);
			var eventsForDay = this.events.filter(event => {
				var eventDate = new Date(event.date);
				return eventDate.getFullYear() === y &&
					   eventDate.getMonth() === m &&
					   eventDate.getDate() === i;
			});

			var hasEvent = eventsForDay.length > 0;
			var isPastEvent = false;
			if (hasEvent) {
				const now = new Date();
				isPastEvent = eventsForDay.every(event => {
					const eventDate = new Date(event.date);
					return eventDate < now;
				});
			}

			var chk = new Date();
			var chkY = chk.getFullYear();
			var chkM = chk.getMonth();
			if (chkY == this.currYear && chkM == this.currMonth && i == this.currDay) {
				html += `<td class="today${hasEvent ? (isPastEvent ? ' past-event-day' : ' event-day') : ''}"><a href="#" class="but-block but-block-${i}" onclick="calendarInstance.showDayEvents(${y}, ${m}, ${i}); return false;">${i}</a></td>`;
			} else {
				html += `<td class="normal${hasEvent ? (isPastEvent ? ' past-event-day' : ' event-day') : ''}"><a href="#" class="but-block but-block-${i}" onclick="calendarInstance.showDayEvents(${y}, ${m}, ${i}); return false;">${i}</a></td>`;
			}

			if (dow == 0) {
				html += '</tr>';
			} else if (i == lastDateOfMonth) {
				var k = 1;
				for (dow; dow < 7; dow++) {
					html += '<td class="not-current">' + k + '</td>';
					k++;
				}
			}
			i++;
		} while (i <= lastDateOfMonth);

		html += '</table>';
		document.getElementById(this.divId).innerHTML = html;
	};

	Cal.prototype.showDayEvents = function(year, month, day) {
		const selectedDate = new Date(year, month, day);
		const dayOfWeek = this.DaysOfWeek[selectedDate.getDay() === 0 ? 6 : selectedDate.getDay() - 1];
		const dateStr = `${day} ${this.Months[month].toUpperCase()} ${year} - ${dayOfWeek}`;
		document.getElementById('selectedDate').textContent = dateStr;

		const eventsOnDay = this.events.filter(event => {
			const eventDate = new Date(event.date);
			return eventDate.getFullYear() === year &&
				   eventDate.getMonth() === month &&
				   eventDate.getDate() === day;
		});

		const eventContainer = document.getElementById('eventDetails');
		eventContainer.innerHTML = '';

		if (eventsOnDay.length > 0) {
			eventsOnDay.forEach(event => {
				const eventDate = new Date(event.date);
				const timeStr = eventDate.toTimeString().slice(0, 5);
				const eventHtml = `
					<div>
						<h2 class="event-title">${event.title || '–ë–µ–∑ –Ω–∞–∑–≤–∏'}</h2>
						<p class="event-desc">–ß–∞—Å –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è: ${timeStr}</p>
					</div>
				`;
				eventContainer.innerHTML += eventHtml;
			});
		} else {
			eventContainer.innerHTML = `
				<p>–ù–µ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ –Ω—ñ—è–∫–∏—Ö –ø–æ–¥—ñ–π</p>
			`;
		}

		try {
			$.arcticmodal({
				content: '#exampleModal-12'
			});
		} catch (error) {
			console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ (#exampleModal-12):', error);
			alert('–ù–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.');
		}
	};

	Cal.prototype.showAllEvents = function() {
		document.getElementById('currentMonth').textContent = 
			this.Months[this.currMonth] + ' ' + this.currYear;

		const eventList = document.getElementById('eventList');
		eventList.innerHTML = '';

		const daysInMonth = new Date(this.currYear, this.currMonth + 1, 0).getDate();

		for (let day = 1; day <= daysInMonth; day++) {
			const eventsForDay = this.events.filter(event => {
				const eventDate = new Date(event.date);
				return eventDate.getFullYear() === this.currYear &&
					   eventDate.getMonth() === this.currMonth &&
					   eventDate.getDate() === day;
			});

			const li = document.createElement('li');
			li.classList.add('event-item');
			if (eventsForDay.length > 0) {
				li.classList.add('activ-event-day');
				const now = new Date();
				const isPastEvent = eventsForDay.every(event => {
					const eventDate = new Date(event.date);
					return eventDate < now;
				});
				li.classList.add(isPastEvent ? 'past' : 'future');
				eventsForDay.forEach(event => {
					const eventDate = new Date(event.date);
					const hours = String(eventDate.getHours()).padStart(2, '0');
					const minutes = String(eventDate.getMinutes()).padStart(2, '0');
					const time = `${hours}:${minutes}`;
					const eventLi = document.createElement('div');
					eventLi.classList.add('event-subitem');
					eventLi.innerHTML = `
						<p>${day} - ${event.title || '–ë–µ–∑ –Ω–∞–∑–≤–∏'} (${time})</p>
					`;
					li.appendChild(eventLi);
				});
			} else {
				li.classList.add('event-absent');
				li.innerHTML = `<p>${day}</p><p>–ù–µ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ –Ω—ñ—è–∫–∞ –ø–æ–¥—ñ—è</p>`;
			}
			eventList.appendChild(li);
		}

		try {
			$.arcticmodal({
				content: '#exampleModal-13'
			});
		} catch (error) {
			console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ (#exampleModal-13):', error);
			alert('–ù–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.');
		}
	};

	// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
	const calendarInstance = new Cal('divCal');

	// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –ø–æ–¥—ñ—ó —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ –∫–∞–ª–µ–Ω–¥–∞—Ä
	calendarInstance.fetchEvents().then(() => {
		calendarInstance.showcurr();
	});

	// –ü—Ä–∏–≤‚Äô—è–∑–∫–∞ –ø–æ–¥—ñ–π –¥–æ –∫–Ω–æ–ø–æ–∫
	document.getElementById('btnPrev').addEventListener('click', () => calendarInstance.previousMonth());
	document.getElementById('btnNext').addEventListener('click', () => calendarInstance.nextMonth());
	document.querySelector('.podii-2').addEventListener('click', (e) => {
		e.preventDefault();
		calendarInstance.showAllEvents();
	});

	// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —É—á–Ω—è
	function updateStudentInfo() {
		const dateOfBirth = document.getElementById('dateOfBirthInput').value;
		const studentInfo = document.getElementById('infoStudentInput').value;

		if (dateOfBirth) {
			document.querySelector('.date-main-main').textContent = dateOfBirth;
		}
		if (studentInfo) {
			document.querySelector('.desk-main-text-text').textContent = studentInfo;
		}

		$.arcticmodal('close');
	}

	// –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
	document.querySelector('.in-desk-info').addEventListener('click', (e) => {
		e.preventDefault();
		$.arcticmodal({
			content: '#exampleModal-14'
		});
	});

	// –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä–∞
	document.getElementById('file-input').addEventListener('change', function(event) {
		const file = event.target.files[0];
		if (file) {
			const reader = new FileReader();
			reader.onload = function(e) {
				document.querySelector('.avatar').src = e.target.result;
			};
			reader.readAsDataURL(file);
		}
	});
</script>
{% endblock %}
